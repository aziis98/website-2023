---
import "@fontsource/eb-garamond/latin.css";
import "@fontsource/open-sans/latin.css";
import "@fontsource/libre-baskerville/latin.css";
import "../styles/main.scss";

import "katex/dist/katex.min.css"

const { title } = Astro.props;
---

<html>
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="generator" content="{Astro.generator}" />

		<meta property="og:title" content={title ?? "aziis98.com"}>
		<meta property="og:description" content="Sito di Antonio De Lucreziis, principalmente con articoli di programmazione e robe che facciamo al PHC. C'è anche una sezione artistica con tutte i lavori che ho fatto nel corso del tempo">
		<meta property="og:image" content="icon.png">

		<title>{title}</title>
		<link rel="icon" type="image/png" sizes="192x192" href="icon.png">

		<script>
			import katex from "katex"
			import renderMathInElement from "katex/contrib/auto-render"

			document.addEventListener("DOMContentLoaded", function () {
				// @ts-ignore
				renderMathInElement(document.body, {
					// customised options
					// • auto-render specific keys, e.g.:
					delimiters: [
						{ left: "$$", right: "$$", display: true },
						{ left: "$", right: "$", display: false },
						{ left: "\\(", right: "\\)", display: false },
						{ left: "\\[", right: "\\]", display: true },
					],
					// • rendering keys, e.g.:
					throwOnError: false,
				});

				document.querySelectorAll(".math-inline").forEach(($e) => {
					const $s = document.createElement("span");
					$e.parentElement.insertBefore($s, $e);
					// @ts-ignore
					katex.render($e.textContent, $e, {
						throwOnError: false,
						displayMode: false,
					});
					$s.appendChild($e.firstChild);
				});

				document.querySelectorAll(".math-display").forEach(($e) => {
					const $p = document.createElement('p')
					const $s = document.createElement('span')
					$p.appendChild($s)

					$e.parentElement.insertBefore($p, $e)
					// @ts-ignore
					katex.render($e.textContent, $e, {
						throwOnError: false,
						displayMode: true,
					});

					$s.appendChild($e.firstChild)
				});
			});
		</script>
		<link
			rel="stylesheet"
			href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"
		/>
	</head>
	<body>
		<nav>
			<div class="nav-item">
				<a href="/" class="homepage">aziis98.com</a>
			</div>
			<div class="sidebar-menu">
				<span class="material-symbols-outlined mobile-menu">menu</span>
			</div>
			<div class="nav-group sidebar">
				<div class="nav-item"><a href="/articles">Articoli</a></div>
				<div class="nav-item"><a href="/art">Art</a></div>
				<!-- <div class="nav-item"><a href="/origami">(Origami)</a></div> -->
				<!-- <div class="nav-item"><a href="/ricette">(Ricette)</a></div> -->
				<div class="rule"></div>
				<div class="nav-item"><a href="/about">About</a></div>
				<div class="sidebar-close">
					<span class="material-symbols-outlined"
						>keyboard_double_arrow_left</span
					>
				</div>
			</div>
		</nav>
		<main>
			<slot />
		</main>
		<script type="module">
			const $mobileMenuBtn = document.querySelector(".mobile-menu");
			const $sidebarCloseBtn = document.querySelector(".sidebar-close");
			const $nav = document.querySelector("nav");

			$mobileMenuBtn.addEventListener("click", () =>
				$nav.classList.toggle("sidebar-open")
			);
			$sidebarCloseBtn.addEventListener("click", () =>
				$nav.classList.toggle("sidebar-open", false)
			);
		</script>
	</body>
</html>
